function addTicket(n,t){const u=$("#ticketsList");let i=t||$("#ticketsList li[data-index]").length,r;if(n){r=$(`
                <li class="list-group-item border rounded px-4 py-2 mb-3" data-index="${i}">
                    <div class="form-group mb-3">
                        <label for="Tickets[${i}].FirstName">First Name</label>
                        <input class="form-control" type="text" id="Tickets[${i}].FirstName" maxlength="100" name="Tickets[${i}].FirstName" value="${n.FirstName}">
                        <span class="text-danger field-validation-valid" data-valmsg-for="Tickets[${i}].FirstName" data-valmsg-replace="true"></span>
                    </div>
                    <div class="form-group mb-3">
                        <label for="Tickets[${i}].LastName">Last Name</label>
                        <input class="form-control" type="text" id="Tickets[${i}].LastName" maxlength="100" name="Tickets[${i}].LastName" value="${n.LastName}">
                        <span class="text-danger field-validation-valid" data-valmsg-for="Tickets[${i}].LastName" data-valmsg-replace="true"></span>
                    </div>
                    <div class="form-group mb-3">
                        <label for="Tickets[${i}].Email">Email Address</label>
                        <input class="form-control" type="email" id="Tickets[${i}].Email" name="Tickets[${i}].Email" value="${n.Email}">
                        <span class="field-validation-valid" data-valmsg-for="Tickets[${i}].Email" data-valmsg-replace="true"></span>
                    </div>
                    <div class="form-group mb-3">
                        <label for="Tickets[${i}].Age">Age</label>
                        <input class="form-control" type="number" data-val="true" data-val-range="Please insert a valid age." data-val-range-max="200" data-val-range-min="0" data-val-required="The Age field is required." id="Tickets[${i}].Age" name="Tickets[${i}].Age" value="${n.Age}"><input name="__Invariant" type="hidden" value="Tickets[${i}].Age">
                        <span class="text-danger field-validation-valid" data-valmsg-for="Tickets[${i}].Age" data-valmsg-replace="true"></span>
                    </div>
                    <div class="form-group mb-3">
                        <label for="Tickets[${i}].SeatNumber">Seat Number</label>
                        <input class="form-control" type="text" id="Tickets[${i}].SeatNumber" name="Tickets[${i}].SeatNumber" value="${n.SeatNumber}">
                        <span class="text-danger field-validation-valid" data-valmsg-for="Tickets[${i}].SeatNumber" data-valmsg-replace="true"></span>
                    </div>
                   <button type="button" class="btn btn-danger btn-sm remove-ticket-btn" data-index="${i}">
                       <i class="bi bi-x"></i> Remove
                   </button>
                </li>
            `);let t=$(`#ticketsList li[data-index="${i}"]`);if(t.length){t.replaceWith(r);return}}else r=$(`
                <li class="list-group-item border rounded px-4 py-2 mb-3" data-index="${i}">
                    <div class="form-group mb-3">
                        <label for="Tickets[${i}].FirstName">First Name</label>
                        <input class="form-control" type="text" id="Tickets[${i}].FirstName" maxlength="100" name="Tickets[${i}].FirstName" value="">
                        <span class="text-danger field-validation-valid" data-valmsg-for="Tickets[${i}].FirstName" data-valmsg-replace="true"></span>
                    </div>
                    <div class="form-group mb-3">
                        <label for="Tickets[${i}].LastName">Last Name</label>
                        <input class="form-control" type="text" id="Tickets[${i}].LastName" maxlength="100" name="Tickets[${i}].LastName" value="">
                        <span class="text-danger field-validation-valid" data-valmsg-for="Tickets[${i}].LastName" data-valmsg-replace="true"></span>
                    </div>
                    <div class="form-group mb-3">
                        <label for="Tickets[${i}].Email">Email Address</label>
                        <input class="form-control" type="email" id="Tickets[${i}].Email" name="Tickets[${i}].Email" value="">
                        <span class="field-validation-valid" data-valmsg-for="Tickets[${i}].Email" data-valmsg-replace="true"></span>
                    </div>
                    <div class="form-group mb-3">
                        <label for="Tickets[${i}].Age">Age</label>
                        <input class="form-control" type="number" data-val="true" data-val-range="Please insert a valid age." data-val-range-max="200" data-val-range-min="0" data-val-required="The Age field is required." id="Tickets[${i}].Age" name="Tickets[${i}].Age" value="0"><input name="__Invariant" type="hidden" value="Tickets[${i}].Age">
                        <span class="text-danger field-validation-valid" data-valmsg-for="Tickets[${i}].Age" data-valmsg-replace="true"></span>
                    </div>
                    <div class="form-group mb-3">
                        <label for="Tickets[${i}].SeatNumber">Seat Number</label>
                        <input class="form-control" type="text" id="Tickets[${i}].SeatNumber" name="Tickets[${i}].SeatNumber" value="">
                        <span class="text-danger field-validation-valid" data-valmsg-for="Tickets[${i}].SeatNumber" data-valmsg-replace="true"></span>
                    </div>
                   <button type="button" class="btn btn-danger btn-sm remove-ticket-btn" data-index="${i}">
                       <i class="bi bi-x"></i> Remove
                   </button>
                </li>
            `);u.append(r)}function storageAvailable(n){let t;try{t=window[n];const i="__storage_test__";return t.setItem(i,i),t.removeItem(i),!0}catch(i){return i instanceof DOMException&&i.name==="QuotaExceededError"&&t&&t.length!==0}}function loadValues(n){$("#FirstName").val(n.FirstName);$("#LastName").val(n.LastName);$("#BirthDate").val(n.BirthDate);$("#Address1").val(n.Address1);$("#Address2").val(n.Address2);$("#City").val(n.City);$("#Country").val(n.Country);n.Tickets.forEach(function(n,t){if(t===0){let t=$.escapeSelector("Tickets[0].");$(`#${t}FirstName`).val(n.FirstName);$(`#${t}LastName`).val(n.LastName);$(`#${t}Email`).val(n.Email);$(`#${t}Age`).val(n.Age);$(`#${t}SeatNumber`).val(n.SeatNumber)}else addTicket(n,t)})}function updateValue(n,t){if(n.id.startsWith("Tickets[")){let i=$(n).closest("li").attr("data-index"),r=n.id.split(".")[1];t.Tickets[i][r]=$(n).val()}else t[n.id]=$(n).val();window.sessionStorage.setItem(KEY_SS_BOOKING_DATA,JSON.stringify(t))}const KEY_SS_BOOKING_DATA="bookingData";$(function(){var n;if(storageAvailable("sessionStorage")){let i=$("#Email").val()||"__anonymous__",t=$.escapeSelector("Tickets[0].");n={FirstName:$("#FirstName").val(),LastName:$("#LastName").val(),Email:i,BirthDate:$("#BirthDate").val(),Address1:$("#Address1").val(),Address2:$("#Address2").val(),City:$("#City").val(),Country:$("#Country").val(),Tickets:[{FirstName:$(`#${t}FirstName`).val(),LastName:$(`#${t}LastName`).val(),Email:$(`#${t}Email`).val(),Age:$(`#${t}Age`).val(),SeatNumber:$(`#${t}SeatNumber`).val()}]};let r=window.sessionStorage.getItem(KEY_SS_BOOKING_DATA);r&&(n=JSON.parse(r),n.Email==i&&loadValues(n))}$(document).on("click","#add-ticket-btn",function(){addTicket();n.Tickets.push({FirstName:"",LastName:"",Email:"",Age:0,SeatNumber:""})});$(document).on("change blur","input.form-control",function(){updateValue(this,n)});$(document).on("click",".remove-ticket-btn",function(){let t=$(this).closest("li"),i=t.attr("data-index");t.remove();$("#ticketsList li[data-index]").each(function(n){$(this).attr("data-index",n);$(this).find("div.form-group").each(function(){let t=$(this).find("label").attr("for").replace(/Tickets\[\d+]/,`Tickets[${n}]`);$(this).find("label").attr("for",t);$(this).find("input").each(function(){$(this).attr("name")=="__Invariant"?$(this).val(t):($(this).attr("id",t),$(this).attr("name",t))});$(this).find("span").attr("data-valmsg-for",t)});$(this).find(".remove-ticket-btn").attr("data-index",n)});n.Tickets.splice(i,1);window.sessionStorage.setItem(KEY_SS_BOOKING_DATA,n)});$("form").on("submit",function(){window.sessionStorage.removeItem(KEY_SS_BOOKING_DATA)})});