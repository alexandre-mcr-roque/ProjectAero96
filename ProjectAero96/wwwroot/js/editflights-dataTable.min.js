const days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];$(function(){function u(n){const t=$("#show-disabled").is(":checked");return n.flights.filter(function(n){return t||!n.deleted})}function f(n){return n.deleted?"<dl>"+`<dd>Departure Time: Every ${days[n.dayOfWeek]}, ${n.departureTime}</dd>`+`<dd>Flight Duration: ${n.flightDuration}</dd>`+`<dd><a href="/flights/edit/${n.id}" role="button" class="btn btn-primary btn-sm me-1">Edit flight</a>`+`<a href="/flights/restore/${n.id}" role="button" class="btn btn-primary btn-sm">Restore flight</a></dd>`+"<\/dl>":"<dl>"+`<dd>Departure Time: ${n.departureTime}</dd>`+`<dd>Flight Duration: ${n.flightDuration}</dd>`+`<dd><a href="/flights/edit/${n.id}" role="button" class="btn btn-primary btn-sm me-1">Edit flight</a>`+`<a href="/flights/disable/${n.id}" role="button" class="btn btn-danger btn-sm">Disable flight</a></dd>`+"<\/dl>"}function r(){let r=Number(t.value),u=Number(i.value);(r>0||u>0)&&r!=u?n.ajax.url(`/flights/getall?from=${r}&to=${u}`):n.ajax.url("/flights/getall");n.ajax.reload()}let t=$("#select-from-city")[0].ej2_instances[0],i=$("#select-to-city")[0].ej2_instances[0],n=$("#table-flights").DataTable({layout:{topStart:null,topEnd:{div:{className:"dataTable-feature",id:"show-disabled-container",html:'<label for="show-disabled" class="form-check-label me-2">Show disabled flights<\/label><input type="checkbox" id="show-disabled" class="form-check-input">'}},bottomEnd:["paging","pageLength"]},ajax:{url:"/flights/getall/include-deleted",dataSrc:u},processing:!0,columnDefs:[{className:"align-middle",targets:"_all"}],columns:[{data:"departureCity.name"},{data:"arrivalCity.name"},{data:"price"},{className:"dt-control",orderable:!1,data:null,defaultContent:""}],rowCallback:function(n,t){t.deleted&&$(n).addClass("row-disabled")}});n.processing(!1);n.on("click","td.dt-control",function(t){let r=t.target.closest("tr"),i=n.row(r);i.child.isShown()?i.child.hide():i.child(f(i.data())).show()});t.value=null;t.change=r;i.value=null;i.change=r});