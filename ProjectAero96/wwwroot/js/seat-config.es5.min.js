"use strict";function validateSeatConfig(n,t,i,r){if(n<1||t<1||i<1||r<1||i>1e3||n>1e3||t>12||r>4)return" ";if(n*t>i)return"Number of seats exceed the maximum amount of seats.";if(t==1){if(r!=1)return"This configuration of window seats is invalid."}else{var u=t-r*2;if(u<0)return"Number of window seats must be at most "+(t/2|0)+".";if(u>4)return"Number of window seats must be at least "+((t-3)/2|0)+"."}return""}function renderSeatMap(){var f=$("#WindowSeats"),o=parseInt($("#SeatRows").val())||0,i=parseInt($("#SeatColumns").val())||0,v=parseInt($("#MaxSeats").val())||0,n=parseInt(f.val())||0,s,h,c,r,l,e,u,a,t;if(i===1?(n=1,f.val(n),f.prop("disabled",!0)):(e=i-n*2,e<0&&(n=i/2|0),e>4&&(n=(i-3)/2|0),f.val(n),f.prop("disabled",!1)),s=validateSeatConfig(o,i,v,n),$("#seat-config-error").text(s),h=$("#seat-map"),h.empty(),!(s.length>0)&&!(o<1)&&!(i<1))for(c=0;c<o;c++){if(r=$('<div class="seat-row"><\/div>'),i===1)u=$('<div class="seats-center"><\/div>'),u.append('<div class="seat"><\/div>'),r.append(u);else{for(l=$('<div class="seats-left"><\/div>'),t=0;t<n;t++)l.append('<div class="seat"><\/div>');for(r.append(l),e=i-n*2,u=$('<div class="seats-center"><\/div>'),t=0;t<e;t++)u.append('<div class="seat"><\/div>');for(r.append(u),a=$('<div class="seats-right"><\/div>'),t=0;t<n;t++)a.append('<div class="seat"><\/div>');r.append(a)}h.append(r)}}function updateSetDefaultSeatConfigButton(){var n=$("#MaxSeats"),r=n.closest("form"),t=r.data("validator")||r.data("unobtrusiveValidation"),i=!1;t?(t.element(n),i=t.invalid.MaxSeats===!0):i=n.attr("aria-invalid")==="true";$("#open-seat-config").prop("disabled",i||n.val()<="0")}$(function(){var n=$("#MaxSeats"),t=$("#SeatRows"),i=$("#SeatColumns"),r=$("#WindowSeats"),u=$("#AirplaneModelId");if(u.length)u.on("change",function(){var u=$(this).val();u=="0"?(n.val(0),t.val(1),i.val(1),r.val(1),renderSeatMap(),updateSetDefaultSeatConfigButton()):$.get("/admin/airplane-models/seat-config/"+u).done(function(u){n.val(u.maxSeats);t.val(u.seatRows);i.val(u.seatColumns);r.val(u.windowSeats)}).fail(function(){n.val(0);t.val(1);i.val(1);r.val(1)}).always(function(){renderSeatMap();updateSetDefaultSeatConfigButton()})});updateSetDefaultSeatConfigButton();n.on("input change",updateSetDefaultSeatConfigButton);n.on("blur",function(){setTimeout(updateSetDefaultSeatConfigButton,10)});$("#SeatRows, #SeatColumns, #MaxSeats, #WindowSeats").on("input",renderSeatMap);renderSeatMap();$("form").on("submit",function(n){var t=parseInt($("#SeatRows").val())||0,i=parseInt($("#SeatColumns").val())||0,r=parseInt($("#MaxSeats").val())||0,u=parseInt($("#WindowSeats").val())||0,f=validateSeatConfig(t,i,r,u);if(f.length>0)return n.preventDefault(),!1})});